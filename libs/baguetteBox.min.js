!function(e,t){"use strict";"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.baguetteBox=t()}(this,function(){"use strict";function r(e){-1!==e.target.id.indexOf("baguette-img")&&F()}function u(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,Y()}function c(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,I()}function d(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,F()}function f(e){i.count++,1<i.count&&(i.multitouch=!0),i.startX=e.changedTouches[0].pageX,i.startY=e.changedTouches[0].pageY}function g(e){if(!a&&!i.multitouch){e.preventDefault?e.preventDefault():e.returnValue=!1;var t=e.touches[0]||e.changedTouches[0];40<t.pageX-i.startX?(a=!0,Y()):t.pageX-i.startX<-40?(a=!0,I()):100<i.startY-t.pageY&&F()}}function p(){i.count--,i.count<=0&&(i.multitouch=!1),a=!1}function b(){p()}function m(e){"block"===v.style.display&&v.contains&&!v.contains(e.target)&&(e.stopPropagation(),S())}var v,h,y,w,k,x={},s={captions:!0,buttons:"auto",fullScreen:!1,noScrollbars:!1,bodyClass:"baguetteBox-open",titleTag:!1,async:!1,preload:2,animation:"slideIn",afterShow:null,afterHide:null,onChange:null,overlayBackgroundColor:"rgba(0,0,0,.8)"},C={},E=[],n=0,o=!1,i={},a=!1,B=/.+\.(gif|jpe?g|png|webp)/i,T={},N=[],t=null;function L(e){if(T.hasOwnProperty(e)){var t=T[e].galleries;[].forEach.call(t,function(e){[].forEach.call(e,function(e){R(e.imageElement,"click",e.eventHandler)}),E===e&&(E=[])}),delete T[e]}}function l(e){switch(e.keyCode){case 37:Y();break;case 39:I();break;case 27:F();break;case 36:(n=e)&&n.preventDefault(),j(0);break;case 35:(t=e)&&t.preventDefault(),j(E.length-1)}var t,n}function A(e,t){if(E!==e){for(E=e,function(e){for(var t in e=e||{},s)x[t]=s[t],void 0!==e[t]&&(x[t]=e[t]);h.style.transition=h.style.webkitTransition="fadeIn"===x.animation?"opacity .4s ease":"slideIn"===x.animation?"":"none","auto"===x.buttons&&("ontouchstart"in window||1===E.length)&&(x.buttons=!1),y.style.display=w.style.display=x.buttons?"":"none";try{v.style.backgroundColor=x.overlayBackgroundColor}catch(e){}}(t);h.firstChild;)h.removeChild(h.firstChild);for(var n,o=[],i=[],a=N.length=0;a<e.length;a++)(n=V("div")).className="full-image",n.id="baguette-img-"+a,N.push(n),o.push("baguetteBox-figure-"+a),i.push("baguetteBox-figcaption-"+a),h.appendChild(N[a]);v.setAttribute("aria-labelledby",o.join(" ")),v.setAttribute("aria-describedby",i.join(" "))}}function P(e){x.noScrollbars&&(document.documentElement.style.overflowY="hidden",document.body.style.overflowY="scroll"),"block"!==v.style.display&&(O(document,"keydown",l),i={count:0,startX:null,startY:null},H(n=e,function(){D(n),M(n)}),X(),v.style.display="block",x.fullScreen&&(v.requestFullscreen?v.requestFullscreen():v.webkitRequestFullscreen?v.webkitRequestFullscreen():v.mozRequestFullScreen&&v.mozRequestFullScreen()),setTimeout(function(){v.className="visible",x.bodyClass&&document.body.classList&&document.body.classList.add(x.bodyClass),x.afterShow&&x.afterShow()},50),x.onChange&&x.onChange(n,N.length),t=document.activeElement,S(),o=!0)}function S(){x.buttons?y.focus():k.focus()}function F(){x.noScrollbars&&(document.documentElement.style.overflowY="auto",document.body.style.overflowY="auto"),"none"!==v.style.display&&(R(document,"keydown",l),v.className="",setTimeout(function(){v.style.display="none",document.fullscreen&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()),x.bodyClass&&document.body.classList&&document.body.classList.remove(x.bodyClass),x.afterHide&&x.afterHide(),t&&t.focus(),o=!1},500))}function H(t,n){var e=N[t],o=E[t];if(void 0!==e&&void 0!==o)if(e.getElementsByTagName("img")[0])n&&n();else{var i=o.imageElement,a=i.getElementsByTagName("img")[0],s="function"==typeof x.captions?x.captions.call(E,i):i.getAttribute("data-caption")||i.title,l=function(e){var t=e.href;if(e.dataset){var n=[];for(var o in e.dataset)"at-"!==o.substring(0,3)||isNaN(o.substring(3))||(n[o.replace("at-","")]=e.dataset[o]);for(var i=Object.keys(n).sort(function(e,t){return parseInt(e,10)<parseInt(t,10)?-1:1}),a=window.innerWidth*window.devicePixelRatio,s=0;s<i.length-1&&i[s]<a;)s++;t=n[i[s]]||t}return t}(i),r=V("figure");if(r.id="baguetteBox-figure-"+t,r.innerHTML='<div class="baguetteBox-spinner"><div class="baguetteBox-double-bounce1"></div><div class="baguetteBox-double-bounce2"></div></div>',x.captions&&s){var u=V("figcaption");u.id="baguetteBox-figcaption-"+t,u.innerHTML=s,r.appendChild(u)}e.appendChild(r);var c=V("img");c.onload=function(){var e=document.querySelector("#baguette-img-"+t+" .baguetteBox-spinner");r.removeChild(e),!x.async&&n&&n()},c.setAttribute("src",l),c.alt=a&&a.alt||"",x.titleTag&&s&&(c.title=s),r.appendChild(c),x.async&&n&&n()}}function I(){return j(n+1)}function Y(){return j(n-1)}function j(e,t){return!o&&0<=e&&e<t.length?(A(t,x),P(e),!0):e<0?(x.animation&&q("left"),!1):e>=N.length?(x.animation&&q("right"),!1):(H(n=e,function(){D(n),M(n)}),X(),x.onChange&&x.onChange(n,N.length),!0)}function q(e){h.className="bounce-from-"+e,setTimeout(function(){h.className=""},400)}function X(){var e=100*-n+"%";"fadeIn"===x.animation?(h.style.opacity=0,setTimeout(function(){C.transforms?h.style.transform=h.style.webkitTransform="translate3d("+e+",0,0)":h.style.left=e,h.style.opacity=1},400)):C.transforms?h.style.transform=h.style.webkitTransform="translate3d("+e+",0,0)":h.style.left=e}function D(e){e-n>=x.preload||H(e+1,function(){D(e+1)})}function M(e){n-e>=x.preload||H(e-1,function(){M(e-1)})}function O(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent("on"+t,function(e){(e=e||window.event).target=e.target||e.srcElement,n(e)})}function R(e,t,n,o){e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent("on"+t,n)}function z(e){return document.getElementById(e)}function V(e){return document.createElement(e)}return[].forEach||(Array.prototype.forEach=function(e,t){for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)}),[].filter||(Array.prototype.filter=function(e,t,n,o,i){for(n=this,o=[],i=0;i<n.length;i++)e.call(t,n[i],i,n)&&o.push(n[i]);return o}),{run:function(e,t){return C.transforms=void 0!==(l=V("div")).style.perspective||void 0!==l.style.webkitPerspective,C.svg=((i=V("div")).innerHTML="<svg/>","http://www.w3.org/2000/svg"===(i.firstChild&&i.firstChild.namespaceURI)),C.passiveEvents=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}(),function(){if(v=z("baguetteBox-overlay"))return h=z("baguetteBox-slider"),y=z("previous-button"),w=z("next-button"),k=z("close-button");var e;(v=V("div")).setAttribute("role","dialog"),v.id="baguetteBox-overlay",document.getElementsByTagName("body")[0].appendChild(v),(h=V("div")).id="baguetteBox-slider",v.appendChild(h),(y=V("button")).setAttribute("type","button"),y.id="previous-button",y.setAttribute("aria-label","Previous"),y.innerHTML=C.svg?'<svg width="44" height="60"><polyline points="30 10 10 30 30 50" stroke="rgba(255,255,255,0.5)" stroke-width="4"stroke-linecap="butt" fill="none" stroke-linejoin="round"/></svg>':"&lt;",v.appendChild(y),(w=V("button")).setAttribute("type","button"),w.id="next-button",w.setAttribute("aria-label","Next"),w.innerHTML=C.svg?'<svg width="44" height="60"><polyline points="14 10 34 30 14 50" stroke="rgba(255,255,255,0.5)" stroke-width="4"stroke-linecap="butt" fill="none" stroke-linejoin="round"/></svg>':"&gt;",v.appendChild(w),(k=V("button")).setAttribute("type","button"),k.id="close-button",k.setAttribute("aria-label","Close"),k.innerHTML=C.svg?'<svg width="30" height="30"><g stroke="rgb(160,160,160)" stroke-width="4"><line x1="5" y1="5" x2="25" y2="25"/><line x1="5" y1="25" x2="25" y2="5"/></g></svg>':"&times;",v.appendChild(k),y.className=w.className=k.className="baguetteBox-button",e=C.passiveEvents?{passive:!0}:null,O(v,"click",r),O(y,"click",u),O(w,"click",c),O(k,"click",d),O(h,"contextmenu",b),O(v,"touchstart",f,e),O(v,"touchmove",g,e),O(v,"touchend",p),O(document,"focus",m,!0)}(),L(e),n=e,a=t,o=document.querySelectorAll(n),s={galleries:[],nodeList:o},T[n]=s,[].forEach.call(o,function(e){a&&a.filter&&(B=a.filter);var t=[];if(t="A"===e.tagName?[e]:e.getElementsByTagName("a"),0!==(t=[].filter.call(t,function(e){if(-1===e.className.indexOf(a&&a.ignoreClass))return B.test(e.href)})).length){var i=[];[].forEach.call(t,function(e,t){function n(e){e.preventDefault?e.preventDefault():e.returnValue=!1,A(i,a),P(t)}var o={eventHandler:n,imageElement:e};O(e,"click",n),i.push(o)}),s.galleries.push(i)}}),s.galleries;var n,a,o,s,i,l},show:j,showNext:I,showPrevious:Y,hide:F,destroy:function(){var e;e=C.passiveEvents?{passive:!0}:null,R(v,"click",r),R(y,"click",u),R(w,"click",c),R(k,"click",d),R(h,"contextmenu",b),R(v,"touchstart",f,e),R(v,"touchmove",g,e),R(v,"touchend",p),R(document,"focus",m,!0),function(){for(var e in T)T.hasOwnProperty(e)&&L(e)}(),R(document,"keydown",l),document.getElementsByTagName("body")[0].removeChild(document.getElementById("baguetteBox-overlay")),T={},E=[],n=0}}});